test:
  image: php:8.0-cli
  script:
    - apt-get update && apt-get install -qy unzip git
    - curl -sSf "https://getcomposer.org/installer" | php -- --filename=composer --install-dir=/usr/local/bin
    - composer update
    - vendor/bin/phpstan --memory-limit=-1 --no-progress
    - vendor/bin/phpunit
    - vendor/bin/ecs --no-error-table --no-progress-bar

test lowest deps:
  image: php:8.0-cli
  script:
    - apt-get update && apt-get install -qy unzip git
    - curl -sSf "https://getcomposer.org/installer" | php -- --filename=composer --install-dir=/usr/local/bin
    - composer update --prefer-lowest
    - vendor/bin/phpunit
